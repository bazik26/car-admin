@if (admins) {
  <section class="admin-page animate-fade-in">
    <header class="page-header-glass animate-slide-in-top">
      <div class="page-header-text">
        <span class="eyebrow-label">
          <i class="fas fa-users-cog"></i>
          Команда
        </span>
        <h2 class="page-title">Управление менеджерами</h2>
        <p class="page-subtitle">
          Следите за активностью команды, управляйте доступом и статусами администраторов.
        </p>
      </div>
      <div class="page-header-actions">
        <div class="metric-chip">
          <i class="fas fa-user-friends"></i>
          <span>{{ admins.length }}</span>
          <small>менеджеров</small>
        </div>
        <button class="btn btn-lion" type="button" (click)="openModal()">
          <i class="fas fa-user-plus"></i>
          <span>Добавить менеджера</span>
        </button>
      </div>
    </header>

    <div class="metrics-grid animate-scale-in">
      <div class="metric-card glass-card">
        <div class="metric-icon success">
          <i class="fas fa-user-check"></i>
        </div>
        <div class="metric-content">
          <span class="metric-label">Активных</span>
          <strong class="metric-value">{{ activeAdminsCount }}</strong>
        </div>
      </div>
      <div class="metric-card glass-card">
        <div class="metric-icon warning">
          <i class="fas fa-user-lock"></i>
        </div>
        <div class="metric-content">
          <span class="metric-label">Заблокированных</span>
          <strong class="metric-value">{{ removedAdminsCount }}</strong>
        </div>
      </div>
      <div class="metric-card glass-card">
        <div class="metric-icon accent">
          <i class="fas fa-shield-alt"></i>
        </div>
        <div class="metric-content">
          <span class="metric-label">Супер-админов</span>
          <strong class="metric-value">{{ superAdminsCount }}</strong>
        </div>
      </div>
    </div>

    @if (admins.length === 0) {
      <div class="data-empty animate-fade-in">
        <i class="fas fa-user-slash"></i>
        <h3>Менеджеры не найдены</h3>
        <p>Добавьте первого менеджера, чтобы начать работу с командой.</p>
      </div>
    } @else {
      <div class="table-card glass-card animate-slide-in-bottom">
        <table class="table table-hover align-middle data-table">
          <thead>
            <tr>
              <th>Почта</th>
              <th>Проект</th>
              <th>Статус</th>
              <th>Роль</th>
              <th class="text-center">Действие</th>
            </tr>
          </thead>
          <tbody>
            @for (admin of admins; track admin) {
              <tr 
                [class.table-danger]="admin.deletedAt" 
                class="animate-fade-in admin-row"
                style="cursor: pointer;"
                (click)="openDetailsModal(admin)">
                <td data-label="Почта">
                  <div class="cell-primary">
                    <i class="fas fa-envelope"></i>
                    <span>{{ admin.email }}</span>
                  </div>
                </td>
                <td data-label="Проект">
                  @if (admin.projectId) {
                    <span class="badge bg-info">
                      {{ admin.projectId === 'office_1' ? 'Офис 1' : 'Офис 2' }}
                    </span>
                  } @else {
                    <span class="text-muted">Не назначен</span>
                  }
                </td>
                <td data-label="Статус">
                  <span class="status-pill" [ngClass]="admin.deletedAt ? 'danger' : 'success'">
                    <i class="fas" [ngClass]="admin.deletedAt ? 'fa-user-slash' : 'fa-user-check'"></i>
                    {{ admin.deletedAt ? 'Удален' : 'Активен' }}
                  </span>
                </td>
                <td data-label="Роль">
                  <span class="role-tag" [class.role-tag--super]="admin.isSuper">
                    <i class="fas" [ngClass]="admin.isSuper ? 'fa-crown' : 'fa-user'"></i>
                    {{ admin.isSuper ? 'Супер' : 'Менеджер' }}
                  </span>
                </td>
                <td data-label="Действие" (click)="$event.stopPropagation()">
                  <div class="action-menu">
                    @if (!admin.deletedAt) {
                      <button
                        type="button"
                        class="btn btn-ghost btn-action danger"
                        (click)="deleteAdmin(admin)"
                      >
                        <i class="fas fa-user-slash"></i>
                        <span>Удалить</span>
                      </button>
                    } @else {
                      <button
                        type="button"
                        class="btn btn-ghost btn-action warning"
                        (click)="restoreAdmin(admin)"
                      >
                        <i class="fas fa-undo"></i>
                        <span>Восстановить</span>
                      </button>
                    }
                  </div>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  </section>
}
